# Про роутер TP-Link MR 3020
Это маленькая коробочка с большим потенциалом.

## Прошивка
Варианты прошивки и восстановления.

### Прошивка через TFTP для версии 3 на Windows 10
_Сброс прошивки на заводскую._

1. Скачать и установить tftp-сервер (только для Windows)
    * https://bitbucket.org/…/Download%20Tftpd64.md
    * http://tftpd32.jounin.net
1. Скачать прошивку из [соответствующей темы на 4pda](https://4pda.to/forum/index.php?s=&showtopic=504279&view=findpost&p=76151001) или из [моего репозитория](./other/firmware/TL-MR3020v3_for_tftp.zip).
1. Подключаем роутер сетевым проводом к компьютеру. _Роутер должен быть отключен от питания._
1. Настраиваем сеть на компьютере.
    * Параметры - Сеть и Интернет - Ethernet - Ethernet - Параметры IP - Редактировать - Вручную
    * IP - адрес: 192.168.0.225
    * Длина префикса подсети: 24
    _В старых версиях маска подсети: 255.255.255.0_
    * Шлюз: 192.168.0.1
    _Либо пустой, если позволяет._
1. Отключаем фаервол (брандмауэр) и антивирусы.
1. Запускаем Tftpd64 (tftp-сервер).
1. Копируем в папку сервера файл прошивки (формат .bin) и переименовываем его в _tp_recovery.bin_.
_Папка сервера по умолчанию C:\Program Files\Tftpd64), также отображается в приложении в Current Directory_.
1. Зажимаем кнопку RESET\WPS на роутере и подключаем питание. Кнопку продолжаем держать.
1. Держим RESET пока в окне tftp-сервера не появится (а затем быстро исчезнет) строка о загрузке прошивки.
1. Отпускаем RESET, дожидаемся, пока роутер запустится и пробуем найти его по WiFi.

Готово!

### Прошивка через TFTP для версии 1 на Windows 10
Все шаги делаются по аналогии с прошивкой 3 версии роутера, только меняются настройки Ethernet:

4. Настраиваем сеть на компьютере.
    * Параметры - Сеть и Интернет - Ethernet - Ethernet - Параметры IP - Редактировать - Вручную
    * IP - адрес: 192.168.0.66
    * Длина префикса подсети: 24
    _В старых версиях маска подсети: 255.255.255.0_
    * Шлюз: 192.168.0.1
    _Либо пустой, если позволяет._

Файл прошивки можно скачать из [сообщения на форуме 4pda](https://4pda.to/forum/index.php?showtopic=504279&st=2880#entry64257804) или из [моего репозитория](./other/firmware/TL-MR3020v1_for_tftp.zip).\
Название файла прошивки не меняем, а оставляем _mr3020v1_tp_recovery.bin_.

Процесс прошивки происходит дольше по времени, чем с версией 3, но всегда можно проверить вкладку Log viewer в приложении Tftpd64, там должно появится что-то вроде:
```
Connection received from 192.168.0.86 on port 3686 [18/09 14:35:48.941]
Read request for file <mr3020v1_tp_recovery.bin>. Mode octet [18/09 14:35:48.942]
OACK: <timeout=5,> [18/09 14:35:48.943]
Using local port 60656 [18/09 14:35:48.943]
<mr3020v1_tp_recovery.bin>: sent 7681 blks, 3932160 bytes in 2 s. 0 blk resent [18/09 14:35:50.233]
```





